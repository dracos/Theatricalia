{% extends 'base.html' %}
{% load prettify %}

{% block extra_head %}
    <script type="text/javascript" src="/static/js/production.js"></script>
{% endblock %}

{% block title %}Editing {{ production.company|default:"" }} production of {{ production.play|prettify }}{% endblock %}

{% block content %}

<h1>Editing production</h1>

{% include 'includes/messages.html' %}

<div id="primary">

{% if not form.errors %}

<p>Thank you for taking the time to add or correct some information on this site.
</p>

<h2 class="no-descenders"><a name="castandcrew"></a>Cast &amp; Crew</h2>
 
{% for part in parts.all %}
<div class="{% cycle row1,row2 %}">
  <a style="float: right" href="./{{ part.id }}">Edit</a>
  {{ part.person.name }}, {{ part.role }} <small>({{ part.cast_string }})</small>
  <small>{{ part.order|default:'' }}
  {% if part.start_date %}, {{ part.start_date|default:'' }}{% endif %}
  {% if part.end_date %}, {{ part.end_date|default:'' }}{% endif %}</small>
</div>
{% empty %}
<p>No parts currently. If you know some, please contribute them below.</p>
{% endfor %}
    
{% endif %}

<h2 class="no-descenders">Add new Part</h2>

<form method="post" id="production_edit">

{% if form.person_choice.errors or form.person_choice.is_hidden %}
{{ form.person_choice.errors }}
{{ form.person_choice }}
{% endif %}

{{ form.person.errors }}
<p>{{ form.person.label_tag }} {{ form.person }}</p>

{% for field in form %}
{% ifnotequal field.label 'Person' %}
{% if field.is_hidden %}
{{ field }}
{% else %}
{{ field.errors }}
<p>{{ field.label_tag }} {{ field }}</p>
{% endif %}
{% endifnotequal %}
{% endfor %}

<p><input type="submit" value="Record addition"></p>
</form>
 
</div>

{% include 'productions/sidebar.html' %}

<div class="secondary">

<ul>
<li><a href="../edit">Edit production details</a></li>
<li><strong>Edit Cast &amp; Crew</strong></li>
</ul>

</div>

{% endblock %}
