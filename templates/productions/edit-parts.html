{% extends 'base.html' %}
{% load prettify %}

{% block extra_head %}
    <script type="text/javascript" src="/static/js/production.js"></script>
{% endblock %}

{% block title %}Editing {{ production.company|default:"" }} production of {{ production.play|prettify }}{% endblock %}

{% block content %}

<h1>Editing production</h1>

{% include 'includes/messages.html' %}

<div id="primary">

{% if not form.errors %}

<p>Thank you for taking the time to add or correct some information on this site.
</p>

<h2 class="no-descenders"><a name="castandcrew"></a>Cast &amp; Crew</h2>
 
<ul id="edit-parts">
{% for part in parts.all %}
<li>
  <a href="./{{ part.id }}">Edit</a>
  {{ part.person.name }}, {{ part.role }} <small>({{ part.cast_string }})</small>
  {% if part.order or part.start_date or part.end_date %}
  <small>{{ part.order|default:'' }}
  {% if part.start_date %}, {{ part.start_date|default:'' }}{% endif %}
  {% if part.end_date %}, {{ part.end_date|default:'' }}{% endif %}</small>
  {% endif %}
</li>
{% empty %}
<li>No parts currently. If you know some, please contribute them below.</li>
{% endfor %}
</ul>
    
{% endif %}

<h2 class="no-descenders">Add new Part</h2>

<form method="post" id="edit">

{% if form.person_choice.errors or form.person_choice.is_hidden %}
{{ form.person_choice.errors }}
{{ form.person_choice }}
{% endif %}

{{ form.person.errors }}
<p>{{ form.person.label_tag }} {{ form.person }}</p>

{% for field in form %}
{% ifnotequal field.label 'Person' %}
{% if field.is_hidden %}
{{ field }}
{% else %}
{{ field.errors }}
<p>{{ field.label_tag }} {{ field }}
{% if field.help_text %}<small>({{ field.help_text }})</small>{% endif %}
</p>
{% endif %}
{% endifnotequal %}
{% endfor %}

<p><input type="submit" value="Record addition"></p>
</form>
 
</div>

{% include 'productions/sidebar.html' %}

<div class="secondary">

<ul>
<li><a href="../edit">Edit production details</a></li>
<li><strong>Edit Cast &amp; Crew</strong></li>
</ul>

</div>

{% endblock %}
